/**************************************************************************************************
 * 
 * \file pie.c
 * 
 * \brief PIE driver implementation
 * 
 * \author Marko Gulin
 * 
 *************************************************************************************************/

#include "inc/drv/pie.h"

/**************************************************************************************************
 * 
 * pie_init()
 * 
 *************************************************************************************************/
void
pie_init(void)
{
    Interrupt_initModule();
    Interrupt_initVectorTable();
}

/**************************************************************************************************
 * 
 * pie_register()
 * 
 *************************************************************************************************/
void
pie_register(uint32_t code, void (*handler)(void))
{
    uint16_t x = (code >> 8) && 0xFFU;

    ASSERT((x >= 1U) && (x <= 12U));
    
    Interrupt_register(code, handler);
    Interrupt_clearACKGroup(1U << (x-1U));
    Interrupt_enable(code);
}
